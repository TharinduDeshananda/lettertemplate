<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <title>File View</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
    <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
    <style type="text/css">
  #editor-bar {display: flex; justify-content: center; align-items: center; flex-wrap: wrap;}
  #editor-bar * {padding: 5px; margin: 5px;}
  #editor-bar *:hover {padding: 5px; margin: 5px; cursor: pointer;}
  .editor-bar-item  {padding: 5px color: white; margin: 5px; background-color:}
  </style>
</head>
<body>

<form action="handleEdit" method="POST" id="formId" >
    <input type="text" id="letterContentId" name="letterContent">
    <input type="text" name="textContentBack" th:value="${textContent}">
    <input type="submit" name="">
</form>

<div id="editor-bar">
    <button id="bt-bold">bold</button>
    <button id="bt-italic">italic</button>
    <button id="bt-underline">underline</button>
    <button id="bt-sup">sup</button>
    <button id="bt-sub">sub</button>
    <button id="bt-ol">Ordered List</button>
    <button id="bt-ul">unordered List</button>
    <select id="font-size" name="font-size">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4" selected="">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>


    </select>
    <select id="fonts" name="fonts">
        <option value="arial">Arial</option>
        <option value="helvetica">Helvetica</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Noto Sans">Noto Sans regular</option>
        <option value="courier">Courier regular</option>
        <option value="Noto Serif">Noto Serif regular</option>
        <option value="Georgia">Georgia</option>
        <option value="Palatino">Palatino</option>
        <option value="Garamond">Garamond</option>
        <option value="Arial Black">Arial Black</option>
        <option value="Tahoma">Tahoma</option>

    </select>
    <button id="bt-center">Center</button>
    <button id="bt-alignleft">Align Left</button>
    <button id="bt-alignright">Align Right</button>
    <button id="bt-justify">Justify</button>
</div>


<div th:utext="${textContent}" contenteditable="true" id="contentBoxId" class="container-md shadow p-3 mb-5 bg-body rounded my-5"></div>

</body>
</html>
<script type="text/javascript">

    var letterField = document.getElementById("letterContentId");
    var contentBox = document.getElementById("contentBoxId");
    var letterForm = document.getElementById("formId");

    letterForm.onsubmit = function(event){

        letterField.value = contentBox.innerHTML;
        return true;
    }

</script>

<script type="text/javascript">
let editor = document.getElementById("contentBoxId");
let btSup = document.getElementById("bt-sup");
let btSub = document.getElementById("bt-sub");
let fontSize = document.getElementById("font-size");
let btFont = document.getElementById("fonts");
let btBold = document.getElementById("bt-bold");
let btItalic = document.getElementById("bt-italic");
let btUnderline = document.getElementById("bt-underline");
let btCenter = document.getElementById("bt-center");
let btAlignLeft = document.getElementById("bt-alignleft");
let btAlignRight = document.getElementById("bt-alignright");
let btJustify = document.getElementById("bt-justify");
let btOrderedList = document.getElementById("bt-ol");
let btUnorderedList = document.getElementById("bt-ul");




editor.onselect = (event)=>{
  console.log(document.queryCommandState("fontSize"));
  fontSize.value = document.queryCommandState("fontSize");
  btFont.value = document.queryCommandState("fontName");
};

btFont.onchange = (event)=>{
    console.log("changing the font");
    document.execCommand("fontName",false,event.target.value);
};

btSup.onclick=(event)=>{
  document.execCommand("superscript");
  console.log("changing sup....");
};
btSub.onclick=(event)=>{
  document.execCommand("subscript");
  console.log("changing sub....");
};


fontSize.onchange=(event)=>{
  document.execCommand("fontSize", false, event.target.value);
  console.log("changing....");
};

btBold.onclick =(event)=>{
  document.execCommand("bold",false);
  console.log('bold changed');
};

btItalic.onclick =(event)=>{
  document.execCommand("italic",false);
  console.log('Italic changed');
};

btUnderline.onclick =(event)=>{
  document.execCommand("underline",false);
  console.log('Underline changed');
};

btCenter.onclick =(event)=>{
  document.execCommand("justifyCenter",false);
  console.log('justify center changed');
};
btAlignLeft.onclick =(event)=>{
  document.execCommand("justifyLeft",false);
  console.log('align left changed');
};
btAlignRight.onclick =(event)=>{
  document.execCommand("justifyRight",false);
  console.log('align right changed');
};
btJustify.onclick =(event)=>{
  document.execCommand("justifyFull",false);
  console.log('justify full changed');
};

btOrderedList.onclick = (event)=>{
  document.execCommand("insertOrderedList",false);
  console.log('Ordered list inserted');
};
btUnorderedList.onclick = (event)=>{
  document.execCommand("insertUnorderedList",false);
  console.log('unordered list inserted');
};


$(".chosen-select").chosen({
  no_results_text: "Nothing found!"
})
</script>
